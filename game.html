<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Shooter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0a1628 0%, #1a2847 50%, #2d4263 100%);
            min-height: 100vh;
            color: #ecf0f1;
            position: relative;
            overflow-x: hidden;
            padding: 20px;
        }

        /* Star background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20% 30%, white, transparent),
                radial-gradient(2px 2px at 60% 70%, white, transparent),
                radial-gradient(1px 1px at 50% 50%, white, transparent),
                radial-gradient(1px 1px at 80% 10%, white, transparent),
                radial-gradient(2px 2px at 90% 60%, white, transparent),
                radial-gradient(1px 1px at 33% 80%, white, transparent);
            background-size: 200px 200px;
            animation: twinkle 5s linear infinite;
            opacity: 0.3;
            z-index: 0;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 0.4; }
        }

        /* Top Navigation Arrows */
        .top-nav {
            position: fixed;
            top: 20px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            pointer-events: auto;
        }

        .nav-arrow {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            border: 2px solid #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.5);
            transition: all 0.3s ease;
            text-decoration: none;
            user-select: none;
            pointer-events: auto;
        }

        .nav-arrow:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(52, 152, 219, 0.8);
        }

        .nav-arrow.right {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            border-color: #2ecc71;
        }

        .nav-arrow.right:hover {
            box-shadow: 0 0 30px rgba(46, 204, 113, 0.8);
        }

        /* Title Screen */
        .title-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(10, 22, 40, 0.95), rgba(26, 40, 71, 0.95));
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .title-content {
            background: rgba(10, 22, 40, 0.95);
            padding: 40px;
            border-radius: 20px;
            border: 3px solid #3498db;
            max-width: 700px;
            width: 90%;
            text-align: center;
            box-shadow: 0 0 40px rgba(52, 152, 219, 0.5);
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .title-header {
            position: relative;
            margin-bottom: 30px;
        }

        .title-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 80px;
            color: rgba(52, 152, 219, 0.2);
            z-index: 1;
            filter: blur(10px);
        }

        .title-main {
            font-size: 48px;
            color: #3498db;
            text-shadow: 0 0 20px rgba(52, 152, 219, 0.5);
            margin-bottom: 5px;
            position: relative;
            z-index: 2;
        }

        .title-sub {
            font-size: 24px;
            color: #5dade2;
            margin-bottom: 30px;
            position: relative;
            z-index: 2;
        }

        /* Title Options */
        .title-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 30px 0;
        }

        .option-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: 2px solid #3498db;
            border-radius: 25px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 0 15px rgba(52, 152, 219, 0.4);
        }

        .option-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 25px rgba(52, 152, 219, 0.7);
        }

        .option-btn.start {
            background: linear-gradient(135deg, #f1c40f, #f39c12);
            border-color: #f1c40f;
        }

        .option-btn.start:hover {
            box-shadow: 0 0 25px rgba(241, 196, 15, 0.7);
        }

        .option-btn.skip {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border-color: #e74c3c;
        }

        .option-btn.skip:hover {
            box-shadow: 0 0 25px rgba(231, 76, 60, 0.7);
        }

        .title-footer {
            margin-top: 20px;
            color: #95a5a6;
            font-size: 14px;
        }

        /* Main Container */
        .main-container {
            position: relative;
            max-width: 900px;
            margin: 80px auto 20px;
            z-index: 1;
            background: rgba(10, 22, 40, 0.5);
            border-radius: 20px;
            border: 3px solid rgba(52, 152, 219, 0.5);
            padding: 20px;
            box-shadow: 0 0 40px rgba(52, 152, 219, 0.3);
            display: none;
        }

        .main-container.active {
            display: block;
        }

        /* Game Box Container */
        .game-box {
            position: relative;
            width: 100%;
            height: 500px;
            background: rgba(10, 22, 40, 0.7);
            border: 4px solid #3498db;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
            box-shadow: 
                0 0 30px rgba(52, 152, 219, 0.4),
                inset 0 0 30px rgba(52, 152, 219, 0.2);
        }

        #gameCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: block;
        }

        /* Game UI */
        .game-ui {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: space-between;
            background: rgba(10, 22, 40, 0.9);
            padding: 12px 20px;
            border-radius: 12px;
            border: 2px solid rgba(52, 152, 219, 0.5);
            width: 90%;
            max-width: 700px;
            z-index: 10;
            backdrop-filter: blur(5px);
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.3);
            display: none;
        }

        .ui-box {
            text-align: center;
            flex: 1;
            min-width: 100px;
        }

        .ui-value {
            font-size: 28px;
            color: #3498db;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(52, 152, 219, 0.5);
        }

        .ui-label {
            font-size: 14px;
            color: #5dade2;
            margin-top: 5px;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
            display: none;
        }

        .btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: 2px solid #3498db;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
            box-shadow: 0 0 15px rgba(52, 152, 219, 0.4);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 25px rgba(52, 152, 219, 0.7);
        }

        .btn.restart {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            border-color: #2ecc71;
        }

        .btn.restart:hover {
            box-shadow: 0 0 25px rgba(46, 204, 113, 0.7);
        }

        /* Mobile/Touch Controls */
        .device-controls {
            position: absolute;
            bottom: 20px;
            width: 100%;
            display: none;
            justify-content: space-between;
            padding: 0 30px;
            z-index: 10;
        }

        @media (max-width: 768px) {
            .device-controls {
                display: flex;
            }
        }

        .control-btn {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            border: 3px solid #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.5);
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }

        .control-btn:active {
            transform: scale(0.95);
            box-shadow: 0 0 30px rgba(52, 152, 219, 0.8);
        }

        .shoot-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border-color: #e74c3c;
        }

        .shoot-btn:active {
            box-shadow: 0 0 30px rgba(231, 76, 60, 0.8);
        }

        /* Start Screen */
        .start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .start-content {
            background: rgba(10, 22, 40, 0.95);
            padding: 40px;
            border-radius: 20px;
            border: 3px solid #3498db;
            max-width: 600px;
            width: 90%;
            text-align: center;
            box-shadow: 0 0 40px rgba(52, 152, 219, 0.5);
        }

        h1 {
            font-size: 48px;
            color: #3498db;
            text-shadow: 0 0 20px rgba(52, 152, 219, 0.5);
            margin-bottom: 10px;
        }

        .subtitle {
            color: #5dade2;
            margin-bottom: 20px;
            font-size: 18px;
        }

        .btn.start {
            background: linear-gradient(135deg, #f1c40f, #f39c12);
            border-color: #f1c40f;
            font-size: 24px;
            padding: 15px 50px;
            margin-top: 30px;
        }

        .btn.start:hover {
            box-shadow: 0 0 30px rgba(241, 196, 15, 0.7);
            transform: scale(1.05);
        }

        /* Game Over Screen */
        .game-over-screen {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 15;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 20px;
        }

        .game-over-content {
            background: rgba(10, 22, 40, 0.95);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            border: 3px solid #3498db;
            max-width: 500px;
            width: 90%;
        }

        .final-score {
            font-size: 48px;
            color: #f1c40f;
            margin: 20px 0;
            text-shadow: 0 0 10px rgba(241, 196, 15, 0.5);
        }

        /* Health bar */
        .health-container {
            width: 100%;
            max-width: 200px;
            height: 20px;
            background: rgba(10, 22, 40, 0.7);
            border: 2px solid rgba(52, 152, 219, 0.5);
            border-radius: 10px;
            overflow: hidden;
            margin: 5px auto 0;
        }

        .health-bar {
            height: 100%;
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            width: 100%;
            transition: width 0.3s ease;
        }

        /* Instructions */
        .instructions {
            background: rgba(10, 22, 40, 0.8);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid rgba(52, 152, 219, 0.5);
            margin-top: 20px;
            text-align: left;
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.2);
        }

        .instructions h3 {
            color: #3498db;
            margin-bottom: 10px;
            text-align: center;
        }

        .instructions-list {
            list-style-type: none;
            padding: 0;
        }

        .instructions-list li {
            margin: 10px 0;
            padding-left: 25px;
            position: relative;
            color: #ecf0f1;
        }

        .instructions-list li:before {
            content: 'üöÄ';
            position: absolute;
            left: 0;
            color: #3498db;
        }

        /* Controls info */
        .controls-info {
            text-align: center;
            color: #5dade2;
            margin-top: 15px;
            font-size: 14px;
            line-height: 1.6;
            padding: 15px;
            background: rgba(10, 22, 40, 0.6);
            border-radius: 10px;
            border: 1px solid rgba(52, 152, 219, 0.3);
            display: none;
        }

        /* Box title */
        .box-title {
            text-align: center;
            color: #3498db;
            margin: 10px 0;
            font-size: 24px;
            text-shadow: 0 0 10px rgba(52, 152, 219, 0.5);
        }

        /* Box border glow animation */
        .game-box {
            animation: borderGlow 3s infinite alternate;
        }

        @keyframes borderGlow {
            0% {
                box-shadow: 
                    0 0 30px rgba(52, 152, 219, 0.4),
                    inset 0 0 30px rgba(52, 152, 219, 0.2);
                border-color: #3498db;
            }
            100% {
                box-shadow: 
                    0 0 40px rgba(52, 152, 219, 0.6),
                    inset 0 0 40px rgba(52, 152, 219, 0.3);
                border-color: #5dade2;
            }
        }

        /* Page content for scrolling */
        .page-content {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }

        .page-content.active {
            display: block;
        }

        /* Feature List */
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-item {
            background: rgba(10, 22, 40, 0.5);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid rgba(52, 152, 219, 0.3);
        }

        .feature-icon {
            font-size: 40px;
            margin-bottom: 10px;
            color: #3498db;
        }
    </style>
</head>
<body>
    <!-- Title Screen -->
    <div class="title-screen" id="titleScreen">
        <div class="title-content">
            <div class="title-header">
                <div class="title-glow">üöÄ</div>
                <h1 class="title-main">SPACE SHOOTER</h1>
                <div class="title-sub">Defend Your Ship from Asteroids!</div>
            </div>
                       
            <div class="title-options">
                <button class="option-btn start" onclick="startGameFromTitle()">
                    <span style="font-size: 24px;">üéÆ</span> 
                    <span>Start Game</span>
                </button>
                
                <button class="option-btn skip" onclick="goToNextPage()">
                    <span style="font-size: 24px;">‚è≠Ô∏è</span> 
                    <span>Skip</span>
                </button>
            </div>
            
            <div class="title-footer">
                <p>Use Arrow Keys to Move ‚Ä¢ Spacebar to Shoot ‚Ä¢ P to Pause</p>
                <p style="font-size: 12px; margin-top: 10px; color: #7f8c8d;">
                    Works on Desktop, Tablet, and Mobile devices
                </p>
            </div>
        </div>
    </div>

    <!-- Top Navigation Arrows -->
    <div class="top-nav">
        <div class="nav-arrow left-arrow" onclick="goToPreviousPage()">‚Üê</div>
        <div class="nav-arrow right" onclick="goToNextPage()">‚Üí</div>
    </div>

    <!-- Start Screen (Game Instructions) -->
    <div class="start-screen" id="startScreen">
        <div class="start-content">
            <h1>SPACE SHOOTER</h1>
            <p class="subtitle">Destroy asteroids before they hit your ship!</p>
            
            <div class="instructions">
                <h3>How to Play:</h3>
                <ul class="instructions-list">
                    <li><strong>Move</strong>: Left/Right arrow keys or tap control buttons</li>
                    <li><strong>Shoot</strong>: Spacebar or tap the red shoot button</li>
                    <li><strong>Pause</strong>: Press P key or Pause button</li>
                    <li><strong>Avoid</strong>: Don't let asteroids hit your ship</li>
                    <li><strong>Destroy</strong>: Shoot asteroids for points</li>
                    <li><strong>Survive</strong>: Keep your health above zero</li>
                </ul>
                
                <p style="color: #5dade2; margin-top: 15px; text-align: center;">
                    <strong>Game is contained in the blue glowing box below!</strong>
                </p>
            </div>
            
            <button class="btn start" onclick="startGame()">üéÆ START GAME</button>
            <button class="btn skip" onclick="goToNextPage()" style="margin-top: 15px; background: linear-gradient(135deg, #e74c3c, #c0392b); border-color: #e74c3c;">
                ‚è≠Ô∏è Skip
            </button>
        </div>
    </div>

    <!-- Main Container with Game Box -->
    <div class="main-container" id="mainContainer">
        <div class="box-title">üéÆ SPACE SHOOTER GAME üéÆ</div>
        
        <!-- Game Box -->
        <div class="game-box" id="gameBox">
            <canvas id="gameCanvas"></canvas>
            
            <!-- Game UI -->
            <div class="game-ui" id="gameUI">
                <div class="ui-box">
                    <div class="ui-value" id="score">0</div>
                    <div class="ui-label">SCORE</div>
                </div>
                <div class="ui-box">
                    <div class="ui-value" id="level">1</div>
                    <div class="ui-label">LEVEL</div>
                </div>
                <div class="ui-box">
                    <div class="ui-value" id="health">100</div>
                    <div class="ui-label">HEALTH</div>
                    <div class="health-container">
                        <div class="health-bar" id="healthBar"></div>
                    </div>
                </div>
            </div>
            
            <!-- Mobile/Touch Controls -->
            <div class="device-controls" id="mobileControls">
                <div class="control-btn left-btn">‚Üê</div>
                <div class="control-btn shoot-btn">‚ö°</div>
                <div class="control-btn right-btn">‚Üí</div>
            </div>
            
            <!-- Game Over Screen -->
            <div class="game-over-screen" id="gameOverScreen">
                <div class="game-over-content">
                    <h2 style="color: #e74c3c; margin-bottom: 20px;">Mission Failed!</h2>
                    <div class="final-score" id="finalScore">0</div>
                    <p style="color: #5dade2; margin-bottom: 30px;">Your spaceship was destroyed by asteroids</p>
                    <div class="controls">
                        <button class="btn restart" onclick="restartGame()">üîÑ Play Again</button>
                        <button class="btn" onclick="showStartScreen()">üè† Main Menu</button>
                        <button class="btn skip" onclick="goToNextPage()" style="background: linear-gradient(135deg, #e74c3c, #c0392b); border-color: #e74c3c;">
                            ‚è≠Ô∏è Skip
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Game Controls -->
        <div class="controls" id="gameControls">
            <button class="btn restart" onclick="restartGame()">üîÑ Restart Game</button>
            <button class="btn" id="pauseBtn" onclick="togglePause()">‚è∏Ô∏è Pause</button>
            <button class="btn skip" onclick="goToNextPage()" style="background: linear-gradient(135deg, #e74c3c, #c0392b); border-color: #e74c3c;">
                ‚è≠Ô∏è Skip
            </button>
        </div>
        
        <!-- Controls Info -->
        <div class="controls-info" id="controlsInfo">
            <p>CONTROLS: <span style="color: #f1c40f;">‚Üê ‚Üí</span> Arrow Keys to Move | 
               <span style="color: #f1c40f;">SPACEBAR</span> to Shoot | 
               <span style="color: #f1c40f;">P</span> to Pause</p>
            <p style="font-size: 12px; color: #95a5a6; margin-top: 5px;">Works on all devices: Desktop, Tablet, and Mobile!</p>
        </div>
    </div>

    <script>
        // Game elements
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const levelElement = document.getElementById('level');
        const healthElement = document.getElementById('health');
        const healthBar = document.getElementById('healthBar');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const finalScoreElement = document.getElementById('finalScore');
        const pauseBtn = document.getElementById('pauseBtn');
        const gameBox = document.getElementById('gameBox');
        const gameUI = document.getElementById('gameUI');
        const startScreen = document.getElementById('startScreen');
        const titleScreen = document.getElementById('titleScreen');
        const controlsInfo = document.getElementById('controlsInfo');
        const gameControls = document.getElementById('gameControls');
        const mobileControls = document.getElementById('mobileControls');
        const mainContainer = document.getElementById('mainContainer');

        // Set canvas to box size
        function resizeCanvas() {
            canvas.width = gameBox.clientWidth;
            canvas.height = gameBox.clientHeight;
            console.log('Canvas size:', canvas.width, 'x', canvas.height);
        }

        // Game variables
        let score = 0;
        let level = 1;
        let health = 100;
        let gameOver = false;
        let gamePaused = false;
        let animationId;
        let asteroidSpawnRate = 100;
        let frameCount = 0;
        let explosions = [];
        let gameStarted = false;

        // Player spaceship
        const player = {
            x: 0,
            y: 0,
            width: 40,
            height: 60,
            speed: 6,
            color: '#3498db',
            bullets: [],
            lastShot: 0,
            shotDelay: 12
        };

        // Asteroids array
        let asteroids = [];

        // Key state tracking
        const keys = {
            ArrowLeft: false,
            ArrowRight: false,
            ' ': false
        };

        // Touch state tracking
        let touchLeft = false;
        let touchRight = false;
        let touchShoot = false;

        // Navigation functions
        function goToPreviousPage() {
            // Replace with your previous page URL
            window.location.href = 'art.html';         }

        function goToNextPage() {
            // Replace with your next page URL
            window.location.href = 'comment.html'; e
        }

        // Start game from title screen
        function startGameFromTitle() {
            titleScreen.style.display = 'none';
            startScreen.style.display = 'flex';
        }

        // Start the game
        function startGame() {
            console.log('Starting game...');
            gameStarted = true;
            startScreen.style.display = 'none';
            mainContainer.style.display = 'block';
            gameUI.style.display = 'flex';
            gameControls.style.display = 'flex';
            controlsInfo.style.display = 'block';
            
            // Resize canvas
            resizeCanvas();
            
            // Initialize player position
            player.x = canvas.width / 2 - player.width / 2;
            player.y = canvas.height - player.height - 30;
            
            initGame();
        }

        // Show start screen
        function showStartScreen() {
            gameStarted = false;
            gameUI.style.display = 'none';
            gameControls.style.display = 'none';
            gameOverScreen.style.display = 'none';
            controlsInfo.style.display = 'none';
            startScreen.style.display = 'flex';
            mainContainer.style.display = 'block';
            
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
        }

        // Initialize game
        function initGame() {
            console.log('Initializing game...');
            score = 0;
            level = 1;
            health = 100;
            gameOver = false;
            gamePaused = false;
            frameCount = 0;
            asteroidSpawnRate = 80;
            
            // Initialize player
            player.x = canvas.width / 2 - player.width / 2;
            player.y = canvas.height - player.height - 30;
            player.bullets = [];
            asteroids = [];
            explosions = [];
            
            updateUI();
            gameOverScreen.style.display = 'none';
            
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            
            // Start game loop
            requestAnimationFrame(gameLoop);
        }

        // Draw player spaceship
        function drawPlayer() {
            ctx.save();
            
            // Draw ship body (triangle)
            ctx.fillStyle = player.color;
            ctx.beginPath();
            ctx.moveTo(player.x + player.width/2, player.y);
            ctx.lineTo(player.x + player.width, player.y + player.height);
            ctx.lineTo(player.x, player.y + player.height);
            ctx.closePath();
            ctx.fill();
            
            // Draw cockpit
            ctx.fillStyle = '#2980b9';
            ctx.beginPath();
            ctx.arc(player.x + player.width/2, player.y + 15, 8, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw engine flame with animation
            const engineGlow = Math.sin(frameCount * 0.1) * 6 + 15;
            ctx.fillStyle = '#f39c12';
            ctx.beginPath();
            ctx.moveTo(player.x + player.width/2 - 8, player.y + player.height);
            ctx.lineTo(player.x + player.width/2, player.y + player.height + engineGlow);
            ctx.lineTo(player.x + player.width/2 + 8, player.y + player.height);
            ctx.closePath();
            ctx.fill();
            
            // Draw ship outline for visibility
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(player.x + player.width/2, player.y);
            ctx.lineTo(player.x + player.width, player.y + player.height);
            ctx.lineTo(player.x, player.y + player.height);
            ctx.closePath();
            ctx.stroke();
            
            ctx.restore();
        }

        // Draw bullets
        function drawBullets() {
            ctx.fillStyle = '#f1c40f';
            for (let i = player.bullets.length - 1; i >= 0; i--) {
                const bullet = player.bullets[i];
                
                // Move bullet upward
                bullet.y -= bullet.speed;
                
                // Remove if off screen
                if (bullet.y < 0) {
                    player.bullets.splice(i, 1);
                    continue;
                }
                
                // Draw bullet with glow
                ctx.shadowColor = '#f1c40f';
                ctx.shadowBlur = 8;
                ctx.fillRect(bullet.x - 3, bullet.y - 6, 6, 12);
                ctx.shadowBlur = 0;
            }
        }

        // Create asteroid
        function createAsteroid() {
            const size = Math.random() * 35 + 25;
            const asteroid = {
                x: Math.random() * (canvas.width - size),
                y: -size,
                size: size,
                speed: Math.random() * 2 + 1 + level * 0.2,
                color: '#95a5a6'
            };
            asteroids.push(asteroid);
        }

        // Draw asteroids
        function drawAsteroids() {
            for (let i = asteroids.length - 1; i >= 0; i--) {
                const asteroid = asteroids[i];
                
                // Move asteroid down
                asteroid.y += asteroid.speed;
                
                // Remove if off screen
                if (asteroid.y > canvas.height + asteroid.size) {
                    asteroids.splice(i, 1);
                    continue;
                }
                
                // Draw asteroid (circle)
                ctx.fillStyle = asteroid.color;
                ctx.beginPath();
                ctx.arc(asteroid.x + asteroid.size/2, asteroid.y + asteroid.size/2, asteroid.size/2, 0, Math.PI * 2);
                ctx.fill();
                
                // Add texture
                ctx.fillStyle = '#7f8c8d';
                for (let j = 0; j < 3; j++) {
                    const craterX = asteroid.x + (Math.random() * asteroid.size/1.5);
                    const craterY = asteroid.y + (Math.random() * asteroid.size/1.5);
                    const craterSize = asteroid.size * 0.1;
                    
                    ctx.beginPath();
                    ctx.arc(craterX, craterY, craterSize, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                // Add outline for visibility
                ctx.strokeStyle = '#ffffff';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(asteroid.x + asteroid.size/2, asteroid.y + asteroid.size/2, asteroid.size/2, 0, Math.PI * 2);
                ctx.stroke();
            }
        }

        // Create explosion
        function createExplosion(x, y) {
            explosions.push({
                x: x,
                y: y,
                life: 1.0,
                size: 25
            });
        }

        // Draw explosions
        function drawExplosions() {
            for (let i = explosions.length - 1; i >= 0; i--) {
                const explosion = explosions[i];
                
                // Update explosion
                explosion.life -= 0.1;
                explosion.size += 2;
                
                // Remove if dead
                if (explosion.life <= 0) {
                    explosions.splice(i, 1);
                    continue;
                }
                
                // Draw explosion
                ctx.save();
                ctx.globalAlpha = explosion.life;
                
                // Multiple circles for explosion effect
                ctx.fillStyle = '#f39c12';
                ctx.beginPath();
                ctx.arc(explosion.x, explosion.y, explosion.size, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#e74c3c';
                ctx.beginPath();
                ctx.arc(explosion.x, explosion.y, explosion.size * 0.7, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#ffffff';
                ctx.beginPath();
                ctx.arc(explosion.x, explosion.y, explosion.size * 0.4, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.restore();
            }
        }

        // Check collisions
        function checkCollisions() {
            // Check bullet-asteroid collisions
            for (let i = player.bullets.length - 1; i >= 0; i--) {
                const bullet = player.bullets[i];
                
                for (let j = asteroids.length - 1; j >= 0; j--) {
                    const asteroid = asteroids[j];
                    
                    // Simple distance check
                    const dx = (bullet.x + 3) - (asteroid.x + asteroid.size/2);
                    const dy = (bullet.y + 6) - (asteroid.y + asteroid.size/2);
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < 6 + asteroid.size/2) {
                        // Hit!
                        createExplosion(bullet.x, bullet.y);
                        player.bullets.splice(i, 1);
                        asteroids.splice(j, 1);
                        score += Math.floor(100 - asteroid.size);
                        updateUI();
                        break;
                    }
                }
            }
            
            // Check asteroid-player collisions
            for (let i = asteroids.length - 1; i >= 0; i--) {
                const asteroid = asteroids[i];
                
                // Simple distance collision
                const playerCenterX = player.x + player.width/2;
                const playerCenterY = player.y + player.height/2;
                const asteroidCenterX = asteroid.x + asteroid.size/2;
                const asteroidCenterY = asteroid.y + asteroid.size/2;
                
                const distance = Math.sqrt(
                    Math.pow(playerCenterX - asteroidCenterX, 2) + 
                    Math.pow(playerCenterY - asteroidCenterY, 2)
                );
                
                if (distance < (player.width/2 + asteroid.size/2)) {
                    // Collision!
                    createExplosion(asteroid.x + asteroid.size/2, asteroid.y + asteroid.size/2);
                    asteroids.splice(i, 1);
                    health -= Math.floor(asteroid.size / 5) + 10;
                    updateUI();
                    
                    if (health <= 0) {
                        endGame();
                    }
                }
            }
        }

        // Update UI
        function updateUI() {
            scoreElement.textContent = score;
            levelElement.textContent = level;
            healthElement.textContent = health;
            healthBar.style.width = health + '%';
            
            // Update health bar color
            if (health > 50) {
                healthBar.style.background = 'linear-gradient(90deg, #2ecc71, #27ae60)';
            } else if (health > 25) {
                healthBar.style.background = 'linear-gradient(90deg, #f39c12, #e67e22)';
            } else {
                healthBar.style.background = 'linear-gradient(90deg, #e74c3c, #c0392b)';
            }
        }

        // Level up
        function checkLevelUp() {
            if (score >= level * 500) {
                level++;
                asteroidSpawnRate = Math.max(40, asteroidSpawnRate - 10);
                updateUI();
            }
        }

        // Handle player shooting
        function handleShooting() {
            const shouldShoot = keys[' '] || touchShoot;
            
            if (shouldShoot && !gamePaused && !gameOver) {
                const currentTime = Date.now();
                if (currentTime - player.lastShot >= player.shotDelay * 16) {
                    // Create bullet at ship's nose
                    player.bullets.push({
                        x: player.x + player.width/2,
                        y: player.y,
                        speed: 9
                    });
                    
                    player.lastShot = currentTime;
                }
            }
        }

        // Handle player movement
        function handleMovement() {
            // Keyboard controls
            if (keys.ArrowLeft || touchLeft) {
                player.x = Math.max(0, player.x - player.speed);
            }
            if (keys.ArrowRight || touchRight) {
                player.x = Math.min(canvas.width - player.width, player.x + player.speed);
            }
        }

        // Draw background stars
        function drawStars() {
            // Simple star field
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            for (let i = 0; i < 100; i++) {
                const starX = (i * 13) % canvas.width;
                const starY = (i * 7) % canvas.height;
                const brightness = 0.5 + (Math.sin(frameCount * 0.02 + i) * 0.3);
                const size = (i % 3) + 1;
                
                ctx.fillStyle = `rgba(255, 255, 255, ${brightness})`;
                ctx.fillRect(starX, starY, size, size);
            }
        }

        // Main game loop
        function gameLoop() {
            if (!gameStarted || gamePaused || gameOver) {
                animationId = requestAnimationFrame(gameLoop);
                return;
            }
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw background
            drawStars();
            
            // Update game state
            frameCount++;
            
            // Spawn new asteroids
            if (frameCount % asteroidSpawnRate === 0) {
                createAsteroid();
            }
            
            // Handle input
            handleMovement();
            handleShooting();
            
            // Check collisions
            checkCollisions();
            
            // Check level up
            checkLevelUp();
            
            // Draw everything
            drawPlayer();
            drawBullets();
            drawAsteroids();
            drawExplosions();
            
            // Continue game loop
            animationId = requestAnimationFrame(gameLoop);
        }

        // End game
        function endGame() {
            gameOver = true;
            finalScoreElement.textContent = score;
            gameOverScreen.style.display = 'flex';
        }

        // Pause/unpause game
        function togglePause() {
            if (!gameStarted) return;
            
            gamePaused = !gamePaused;
            pauseBtn.textContent = gamePaused ? '‚ñ∂Ô∏è Resume' : '‚è∏Ô∏è Pause';
        }

        // Restart game
        function restartGame() {
            if (!gameStarted) {
                startGame();
                return;
            }
            initGame();
        }

        // Keyboard event listeners
        window.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight' || e.key === ' ') {
                keys[e.key] = true;
                e.preventDefault();
            }
            
            if (e.key === 'p' || e.key === 'P') {
                togglePause();
            }
        });

        window.addEventListener('keyup', (e) => {
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight' || e.key === ' ') {
                keys[e.key] = false;
            }
        });

        // Touch event listeners for mobile controls
        function setupTouchControls() {
            const leftBtn = document.querySelector('.left-btn');
            const rightBtn = document.querySelector('.right-btn');
            const shootBtn = document.querySelector('.shoot-btn');
            
            // Left button
            leftBtn.addEventListener('touchstart', (e) => {
                touchLeft = true;
                e.preventDefault();
            });
            
            leftBtn.addEventListener('touchend', (e) => {
                touchLeft = false;
                e.preventDefault();
            });
            
            // Right button
            rightBtn.addEventListener('touchstart', (e) => {
                touchRight = true;
                e.preventDefault();
            });
            
            rightBtn.addEventListener('touchend', (e) => {
                touchRight = false;
                e.preventDefault();
            });
            
            // Shoot button
            shootBtn.addEventListener('touchstart', (e) => {
                touchShoot = true;
                e.preventDefault();
            });
            
            shootBtn.addEventListener('touchend', (e) => {
                touchShoot = false;
                e.preventDefault();
            });
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            resizeCanvas();
            if (gameStarted) {
                // Recalculate player position
                player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
                player.y = canvas.height - player.height - 30;
            }
        });

        // Initialize everything when page loads
        window.onload = function() {
            console.log('Page loaded, setting up game...');
            resizeCanvas();
            setupTouchControls();
            
            // Show title screen by default
            titleScreen.style.display = 'flex';
            mainContainer.style.display = 'none';
        };
    </script>
</body>
</html>